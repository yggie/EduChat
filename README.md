This is a complete rewrite of the client server application
